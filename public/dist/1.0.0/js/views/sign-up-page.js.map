{
  "version": 3,
  "sources": ["../../../../../src/client/views/pages/sign-up-page.ts"],
  "sourcesContent": ["import { Page } from '@azizka/router';\r\n\r\nimport { View } from '../view';\r\n\r\nimport { AuthServiceComponent } from '../components/auth-service-component';\r\n\r\nimport { loadContent, navigateHandler } from '../../helpers';\r\n\r\nimport { context } from '../../globals';\r\n\r\nimport { DEFAULT_LANGUAGE } from '../../../globals';\r\n\r\nexport class SignUpPage implements View {\r\n  protected static page: SignUpPage | null = null;\r\n\r\n  protected node: HTMLElement | null = null;\r\n\r\n  protected titleElem: HTMLElement | null = null;\r\n\r\n  protected emailInputElem: HTMLInputElement | null = null;\r\n\r\n  protected nameInputElem: HTMLInputElement | null = null;\r\n  protected nameLabelElem: HTMLElement | null = null;\r\n\r\n  protected passwordInputElem: HTMLInputElement | null = null;\r\n  protected passwordLabelElem: HTMLElement | null = null;\r\n\r\n  protected photoInputElem: HTMLInputElement | null = null;\r\n  protected photoLabelElem: HTMLElement | null = null;\r\n\r\n  protected signInBtn: HTMLElement | null = null;\r\n  protected signUpBtn: HTMLElement | null = null;\r\n  protected cancelBtn: HTMLElement | null = null;\r\n\r\n  protected authService: AuthServiceComponent | null = null;\r\n\r\n  protected signInBtnClickHandler: (event: MouseEvent) => void;\r\n  protected cancelBtnClickHandler: (event: MouseEvent) => void;\r\n\r\n  protected formSubmitHandler: (event: SubmitEvent) => void;\r\n\r\n  static get instance(): SignUpPage {\r\n    if(!SignUpPage.page) {\r\n      SignUpPage.page = new SignUpPage();\r\n    }\r\n\r\n    return SignUpPage.page;\r\n  }\r\n\r\n  constructor() {\r\n    this.formSubmitHandler = event => {\r\n      event.preventDefault();\r\n\r\n      const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\r\n      const data = new FormData(form as HTMLFormElement);\r\n\r\n      console.log('Form submited: ');          \r\n\r\n      data.forEach((value, key) => {\r\n        console.log(key + ':', value);          \r\n      });\r\n    };\r\n\r\n    this.signInBtnClickHandler = event => navigateHandler(event, this.signInBtn as HTMLElement);\r\n    this.cancelBtnClickHandler = event => navigateHandler(event, this.cancelBtn as HTMLElement);\r\n  }\r\n\r\n  get elem(): HTMLElement | null {\r\n    return this.node;\r\n  }\r\n\r\n  async init(parent: HTMLElement | null, firstTime: boolean) {\r\n    let content = await loadContent(parent, firstTime, []);\r\n\r\n    this.node = content.querySelector('[data-page=\"signup-page\"]') || null;\r\n\r\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\r\n\r\n    this.titleElem = this.node?.querySelector('[data-title=\"main\"]') || null;\r\n\r\n    this.emailInputElem = form?.querySelector('#email') || null;\r\n\r\n    this.nameInputElem = form?.querySelector('#name') || null;\r\n    this.nameLabelElem = form?.querySelector('#name-label') || null;\r\n\r\n    this.passwordInputElem = form?.querySelector('#password') || null;\r\n    this.passwordLabelElem = form?.querySelector('#password-label') || null;\r\n\r\n    this.photoInputElem = form?.querySelector('#photo') || null;\r\n    this.photoLabelElem = form?.querySelector('#photo-label') || null;\r\n\r\n    this.signInBtn = form?.querySelector('[data-button=\"sign-in\"]') || null;    \r\n    this.signUpBtn = form?.querySelector('[data-button=\"sign-up\"]') || null;\r\n    this.cancelBtn = form?.querySelector('[data-button=\"cancel\"]') || null;    \r\n\r\n    this.authService = new AuthServiceComponent();\r\n    await this.authService.init(this, firstTime);\r\n\r\n    return content;\r\n  }\r\n\r\n  async mount() {\r\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\r\n\r\n    form?.addEventListener('submit', this.formSubmitHandler);\r\n    this.signInBtn?.addEventListener('click', this.signInBtnClickHandler);\r\n    this.cancelBtn?.addEventListener('click', this.cancelBtnClickHandler);\r\n  }\r\n\r\n  async unmount() {\r\n    const form = this.node?.querySelector('.main-card form') as HTMLFormElement;\r\n\r\n    form?.removeEventListener('submit', this.formSubmitHandler);\r\n    this.signInBtn?.removeEventListener('click', this.signInBtnClickHandler);\r\n    this.cancelBtn?.removeEventListener('click', this.cancelBtnClickHandler);\r\n  }\r\n\r\n  async load(lang: string, page: Page, firstLoad: boolean): Promise<void> {\r\n    if(this.titleElem) {\r\n      this.titleElem.textContent = context.tr('Sign Up');\r\n    }\r\n\r\n    if(this.nameInputElem) {\r\n      this.nameInputElem.placeholder = context.tr('Name') + '*';\r\n    }\r\n\r\n    if(this.nameLabelElem) {\r\n      this.nameLabelElem.textContent = context.tr('Name') + '*';\r\n    }\r\n\r\n    if(this.passwordInputElem) {\r\n      this.passwordInputElem.placeholder = context.tr('Password') + '*';\r\n    }\r\n\r\n    if(this.passwordLabelElem) {\r\n      this.passwordLabelElem.textContent = context.tr('Password') + '*';\r\n    }\r\n\r\n    if(this.photoLabelElem) {\r\n      this.photoLabelElem.textContent = context.tr('Photo');\r\n    }\r\n\r\n    if(this.signInBtn) {\r\n      this.signInBtn.textContent = context.tr('Sign In');\r\n    }\r\n\r\n    if(this.signUpBtn) {\r\n      this.signUpBtn.textContent = context.tr('Sign Up');\r\n    }\r\n\r\n    if(this.cancelBtn) {\r\n      this.cancelBtn.textContent = context.tr('Cancel');\r\n    }\r\n\r\n    this.signInBtn?.setAttribute('href', (lang === DEFAULT_LANGUAGE ? '' : `/${lang}`) + '/sign-in');\r\n    this.cancelBtn?.setAttribute('href', (lang === DEFAULT_LANGUAGE ? '' : `/${lang}`) + '/');\r\n\r\n    await this.authService?.load?.(lang, page, firstLoad);\r\n  }\r\n}\r\n"],
  "mappings": "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",
  "names": []
}
